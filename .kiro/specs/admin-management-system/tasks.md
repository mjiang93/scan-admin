# 实施计划

- [x] 1. 项目初始化和基础配置
  - 使用Vite创建React + TypeScript项目
  - 安装核心依赖：React Router 6、Ant Design 5、Zustand、Axios、fast-check、Vitest
  - 配置TypeScript、ESLint、Prettier
  - 创建基础目录结构
  - 配置多环境变量文件(.env.development, .env.production)
  - _需求: 8.1, 8.2_

- [x] 2. 配置管理模块
  - 实现环境配置加载逻辑，根据环境变量读取对应配置
  - 创建统一的配置访问接口
  - 实现默认配置降级机制
  - _需求: 8.1, 8.2, 8.4, 8.5_

- [x] 2.1 编写属性测试：环境配置加载
  - **Property 36: 环境配置加载**
  - **验证需求: Requirements 8.1**

- [x] 2.2 编写属性测试：环境API地址切换
  - **Property 37: 环境API地址切换**
  - **验证需求: Requirements 8.2**

- [x] 2.3 编写属性测试：配置访问接口
  - **Property 38: 配置访问接口**
  - **验证需求: Requirements 8.4**

- [x] 2.4 编写属性测试：默认配置降级
  - **Property 39: 默认配置降级**
  - **验证需求: Requirements 8.5**

- [x] 3. 工具函数库
  - 实现日期格式化工具（format.ts）
  - 实现数字格式化工具（金额、千分位）
  - 实现数据验证工具（手机号、邮箱、身份证）
  - 实现数组操作工具（去重、扁平化）
  - 实现对象操作工具（深拷贝、合并）
  - 实现字符串处理工具（截取、脱敏）
  - _需求: 10.1, 10.2, 10.3, 10.4, 10.5, 10.6_

- [x] 3.1 编写属性测试：日期格式化一致性
  - **Property 46: 日期格式化一致性**
  - **验证需求: Requirements 10.1**

- [x] 3.2 编写属性测试：数字格式化正确性
  - **Property 47: 数字格式化正确性**
  - **验证需求: Requirements 10.2**

- [x] 3.3 编写属性测试：数据验证准确性
  - **Property 48: 数据验证准确性**
  - **验证需求: Requirements 10.3**

- [x] 3.4 编写属性测试：数组操作正确性
  - **Property 49: 数组操作正确性**
  - **验证需求: Requirements 10.4**

- [x] 3.5 编写属性测试：对象深拷贝独立性
  - **Property 50: 对象深拷贝独立性**
  - **验证需求: Requirements 10.5**

- [x] 3.6 编写属性测试：字符串处理正确性
  - **Property 51: 字符串处理正确性**
  - **验证需求: Requirements 10.6**

- [x] 4. HTTP请求封装
  - 基于Axios创建请求实例
  - 实现请求拦截器（自动添加Token）
  - 实现响应拦截器（统一错误处理、401/403处理）
  - 实现请求超时和重试机制
  - 实现重复请求取消功能
  - _需求: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6_

- [x] 4.1 编写属性测试：请求Token注入
  - **Property 30: 请求Token注入**
  - **验证需求: Requirements 7.1**

- [x] 4.2 编写属性测试：401状态处理
  - **Property 31: 401状态处理**
  - **验证需求: Requirements 7.2**

- [x] 4.3 编写属性测试：错误统一处理
  - **Property 32: 错误统一处理**
  - **验证需求: Requirements 7.3**

- [x] 4.4 编写属性测试：拦截器执行
  - **Property 33: 拦截器执行**
  - **验证需求: Requirements 7.4**

- [x] 4.5 编写属性测试：超时处理
  - **Property 34: 超时处理**
  - **验证需求: Requirements 7.5**

- [x] 4.6 编写属性测试：重复请求取消
  - **Property 35: 重复请求取消**
  - **验证需求: Requirements 7.6**

- [x] 5. 本地存储工具
  - 实现localStorage封装（支持JSON序列化）
  - 实现Token存储和读取
  - 实现用户信息存储和读取
  - 实现存储清除功能
  - _需求: 1.2, 1.4, 1.5_

- [x] 6. 状态管理
  - 使用Zustand创建用户状态store（用户信息、Token）
  - 创建权限状态store（权限列表、角色信息）
  - 创建应用状态store（菜单折叠、主题等）
  - 实现状态持久化中间件
  - _需求: 11.1, 11.2, 11.3, 11.4, 11.5_

- [x] 6.1 编写属性测试：用户状态存储
  - **Property 52: 用户状态存储**
  - **验证需求: Requirements 11.1**

- [x] 6.2 编写属性测试：状态访问接口
  - **Property 53: 状态访问接口**
  - **验证需求: Requirements 11.2**

- [x] 6.3 编写属性测试：状态更新通知
  - **Property 54: 状态更新通知**
  - **验证需求: Requirements 11.3**

- [x] 6.4 编写属性测试：状态持久化恢复
  - **Property 55: 状态持久化恢复**
  - **验证需求: Requirements 11.4**

- [x] 6.5 编写属性测试：状态中间件执行
  - **Property 56: 状态中间件执行**
  - **验证需求: Requirements 11.5**

- [x] 7. 类型定义
  - 定义用户相关类型（User, Role, Permission）
  - 定义API响应类型（ApiResponse, PageData）
  - 定义路由配置类型（RouteConfig, RouteMeta）
  - 定义订单相关类型（Order, OrderItem, OrderStatus）
  - 定义通用类型（FormField, TableColumn）
  - _需求: 所有需求_

- [x] 8. 认证服务
  - 实现登录API调用（/api/auth/login）
  - 实现登出API调用（/api/auth/logout）
  - 实现获取用户信息API（/api/auth/userInfo）
  - 实现Token验证逻辑
  - 实现登录状态检查
  - _需求: 1.1, 1.2, 1.3, 1.4, 1.5_

- [x] 8.1 编写属性测试：登录凭据验证一致性
  - **Property 1: 登录凭据验证一致性**
  - **验证需求: Requirements 1.1**

- [x] 8.2 编写属性测试：Token存储完整性
  - **Property 2: Token存储完整性**
  - **验证需求: Requirements 1.2**

- [x] 8.3 编写属性测试：认证失败错误处理
  - **Property 3: 认证失败错误处理**
  - **验证需求: Requirements 1.3**

- [x] 8.4 编写属性测试：Token过期清理
  - **Property 4: Token过期清理**
  - **验证需求: Requirements 1.4**

- [x] 8.5 编写属性测试：登出状态清理
  - **Property 5: 登出状态清理**
  - **验证需求: Requirements 1.5**

- [x] 9. 权限管理核心逻辑
  - 实现权限加载函数
  - 实现页面权限验证函数
  - 实现按钮权限验证函数
  - 实现权限更新逻辑
  - _需求: 2.1, 2.2, 2.3, 2.4, 2.5_

- [x] 9.1 编写属性测试：权限加载一致性
  - **Property 6: 权限加载一致性**
  - **验证需求: Requirements 2.1**

- [x] 9.2 编写属性测试：页面权限验证
  - **Property 7: 页面权限验证**
  - **验证需求: Requirements 2.2**

- [x] 9.3 编写属性测试：无权限跳转
  - **Property 8: 无权限跳转**
  - **验证需求: Requirements 2.3**

- [x] 9.4 编写属性测试：按钮权限控制
  - **Property 9: 按钮权限控制**
  - **验证需求: Requirements 2.4**

- [x] 9.5 编写属性测试：权限更新同步
  - **Property 10: 权限更新同步**
  - **验证需求: Requirements 2.5**

- [x] 10. 动态路由系统
  - 定义静态路由配置（登录页、异常页等）
  - 实现根据权限生成动态路由的函数
  - 实现路由转菜单结构的函数
  - 创建路由守卫组件（RouteGuard）
  - 集成React Router 6配置
  - _需求: 3.1, 3.2, 3.3, 3.4_

- [x] 10.1 编写属性测试：动态路由生成
  - **Property 11: 动态路由生成**
  - **验证需求: Requirements 3.1**

- [x] 10.2 编写属性测试：路由数据完整性
  - **Property 12: 路由数据完整性**
  - **验证需求: Requirements 3.2**

- [x] 10.3 编写属性测试：未授权路由拦截
  - **Property 13: 未授权路由拦截**
  - **验证需求: Requirements 3.3**

- [x] 10.4 编写属性测试：路由菜单同步
  - **Property 14: 路由菜单同步**
  - **验证需求: Requirements 3.4**

- [x] 11. 布局组件
  - 创建BasicLayout（包含Header、Sider、Content）
  - 创建UserLayout（用于登录页）
  - 创建BlankLayout（空白布局）
  - 实现响应式侧边栏（小屏幕自动收起）
  - 实现菜单渲染逻辑
  - _需求: 12.1, 12.2, 12.3_

- [x] 11.1 编写属性测试：响应式菜单收起
  - **Property 57: 响应式菜单收起**
  - **验证需求: Requirements 12.1**

- [x] 11.2 编写属性测试：布局自适应
  - **Property 58: 布局自适应**
  - **验证需求: Requirements 12.2**

- [x] 11.3 编写属性测试：移动端界面适配
  - **Property 59: 移动端界面适配**
  - **验证需求: Requirements 12.3**

- [x] 12. 公共组件 - BasicTable
  - 创建BasicTable组件
  - 实现分页功能
  - 实现排序功能
  - 实现行选择功能
  - 实现刷新和导出按钮
  - _需求: 9.1, 12.4_

- [x] 12.1 编写属性测试：表格组件功能完整性
  - **Property 40: 表格组件功能完整性**
  - **验证需求: Requirements 9.1**

- [x] 12.2 编写属性测试：表格横向滚动
  - **Property 60: 表格横向滚动**
  - **验证需求: Requirements 12.4**

- [x] 13. 公共组件 - BasicForm
  - 创建BasicForm组件
  - 实现动态表单字段渲染
  - 实现表单验证
  - 实现数据双向绑定
  - _需求: 9.2_

- [x] 13.1 编写属性测试：表单验证功能
  - **Property 41: 表单验证功能**
  - **验证需求: Requirements 9.2**

- [x] 14. 公共组件 - BasicModal
  - 创建BasicModal组件
  - 支持自定义标题和内容
  - 支持确认和取消回调
  - 支持不同尺寸
  - _需求: 9.3_

- [x] 14.1 编写属性测试：弹窗自定义能力
  - **Property 42: 弹窗自定义能力**
  - **验证需求: Requirements 9.3**

- [x] 15. 公共组件 - SearchForm
  - 创建SearchForm组件
  - 支持多种表单控件（输入框、选择器、日期选择器）
  - 实现搜索和重置功能
  - 支持条件组合
  - _需求: 9.4_

- [x] 15.1 编写属性测试：搜索条件组合
  - **Property 43: 搜索条件组合**
  - **验证需求: Requirements 9.4**

- [x] 16. 公共组件 - Upload
  - 创建Upload组件
  - 实现文件类型验证
  - 实现文件大小验证
  - 显示上传进度
  - _需求: 9.5_

- [x] 16.1 编写属性测试：上传文件验证
  - **Property 44: 上传文件验证**
  - **验证需求: Requirements 9.5**

- [x] 17. 公共组件 - AuthButton
  - 创建AuthButton组件
  - 根据权限显示/隐藏按钮
  - 继承Ant Design Button所有属性
  - _需求: 2.4_

- [x] 17.1 编写属性测试：组件参数验证
  - **Property 45: 组件参数验证**
  - **验证需求: Requirements 9.6**

- [x] 18. 自定义Hooks
  - 创建useAuth Hook（获取登录状态和用户信息）
  - 创建usePermission Hook（权限判断）
  - 创建useTable Hook（表格状态管理）
  - _需求: 1.1, 2.2, 4.6_

- [x] 19. 登录页面
  - 创建Login页面组件
  - 实现登录表单（用户名、密码）
  - 实现表单验证
  - 实现登录提交逻辑
  - 登录成功后跳转到首页
  - 登录失败显示错误提示
  - _需求: 1.1, 1.2, 1.3_

- [x] 20. 异常页面
  - 创建403无权限页面
  - 创建404未找到页面
  - 创建500服务器错误页面
  - _需求: 2.3_

- [x] 21. 用户管理服务
  - 实现获取用户列表API（/api/users）
  - 实现创建用户API（/api/users）
  - 实现更新用户API（/api/users/:id）
  - 实现删除用户API（/api/users/:id）
  - _需求: 4.1, 4.2, 4.3, 4.4, 4.5_

- [x] 22. 用户管理页面
  - 创建User页面组件
  - 使用BasicTable展示用户列表
  - 使用SearchForm实现搜索功能
  - 实现新增用户功能（弹窗表单）
  - 实现编辑用户功能（弹窗表单）
  - 实现删除用户功能（确认对话框）
  - 实现分页功能
  - _需求: 4.1, 4.2, 4.3, 4.4, 4.5, 4.6, 4.7_

- [x] 22.1 编写属性测试：用户列表数据完整性
  - **Property 15: 用户列表数据完整性**
  - **验证需求: Requirements 4.1**

- [x] 22.2 编写属性测试：表单必填验证
  - **Property 16: 表单必填验证**
  - **验证需求: Requirements 4.2**

- [x] 22.3 编写属性测试：数据格式验证
  - **Property 17: 数据格式验证**
  - **验证需求: Requirements 4.3**

- [x] 22.4 编写属性测试：用户编辑数据加载
  - **Property 18: 用户编辑数据加载**
  - **验证需求: Requirements 4.4**

- [x] 22.5 编写属性测试：删除确认流程
  - **Property 19: 删除确认流程**
  - **验证需求: Requirements 4.5**

- [x] 22.6 编写属性测试：分页功能
  - **Property 20: 分页功能**
  - **验证需求: Requirements 4.6**

- [x] 22.7 编写属性测试：搜索过滤
  - **Property 21: 搜索过滤**
  - **验证需求: Requirements 4.7**

- [x] 23. 订单管理服务
  - 实现获取订单列表API（/api/orders）
  - 实现获取订单详情API（/api/orders/:id）
  - 实现导出订单API（/api/orders/export）
  - _需求: 5.1, 5.2, 5.4_

- [x] 24. 订单管理页面
  - 创建Order页面组件
  - 使用BasicTable展示订单列表
  - 实现订单状态筛选
  - 实现订单详情查看（弹窗或抽屉）
  - 实现订单导出功能
  - 实现批量操作功能
  - _需求: 5.1, 5.2, 5.3, 5.4, 5.5_

- [x] 24.1 编写属性测试：订单列表数据完整性
  - **Property 22: 订单列表数据完整性**
  - **验证需求: Requirements 5.1**

- [x] 24.2 编写属性测试：订单详情完整性
  - **Property 23: 订单详情完整性**
  - **验证需求: Requirements 5.2**

- [x] 24.3 编写属性测试：订单状态筛选
  - **Property 24: 订单状态筛选**
  - **验证需求: Requirements 5.3**

- [x] 24.4 编写属性测试：订单导出数据一致性
  - **Property 25: 订单导出数据一致性**
  - **验证需求: Requirements 5.4**

- [x] 24.5 编写属性测试：批量操作选择
  - **Property 26: 批量操作选择**
  - **验证需求: Requirements 5.5**

- [x] 25. 打印功能
  - 创建打印模板组件（内包装条码、外包装条码、本条码等）
  - 实现条码生成（使用jsbarcode）
  - 实现二维码生成（使用qrcode.react）
  - 创建打印预览页面
  - 实现打印功能（调用window.print）
  - 实现打印日志记录
  - _需求: 6.1, 6.2, 6.3, 6.4, 6.5_

- [x] 25.1 编写属性测试：打印内容完整性
  - **Property 27: 打印内容完整性**
  - **验证需求: Requirements 6.2**

- [x] 25.2 编写属性测试：打印模板匹配
  - **Property 28: 打印模板匹配**
  - **验证需求: Requirements 6.4**

- [x] 25.3 编写属性测试：打印日志记录
  - **Property 29: 打印日志记录**
  - **验证需求: Requirements 6.5**

- [x] 26. 全局样式和主题
  - 配置Ant Design主题色
  - 编写全局样式（reset.css）
  - 实现响应式断点样式
  - 实现滚动条样式
  - _需求: 12.1, 12.2, 12.5_

- [x] 26.1 编写属性测试：内容溢出处理
  - **Property 61: 内容溢出处理**
  - **验证需求: Requirements 12.5**

- [x] 27. 应用入口和路由集成
  - 配置App.tsx（集成路由、状态管理）
  - 实现路由守卫逻辑
  - 实现全局Loading
  - 实现全局错误边界
  - _需求: 所有需求_

- [x] 28. 最终检查点
  - 确保所有测试通过，如有问题请询问用户
